FROM openshift3/apb-base

LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IGxkYXAtaW50ZWdyYXRpb24KZGVzY3JpcHRpb246IEVuYWJsZXMg\
TERBUCB1c2VycyBhbmQgZ3JvdXBzIGZvciBPcGVuU2hpZnQgQ29udGFpbmVyIFBsYXRmb3JtCmJp\
bmRhYmxlOiBGYWxzZQphc3luYzogb3B0aW9uYWwKbWV0YWRhdGE6CiAgZGlzcGxheU5hbWU6IGxk\
YXAtaW50ZWdyYXRpb24KICBkZXBlbmRlbmNpZXM6IFtdCnBsYW5zOgogIC0gbmFtZTogZGVmYXVs\
dAogICAgZGVzY3JpcHRpb246IFRoaXMgZGVmYXVsdCBwbGFuIGRlcGxveXMgbGRhcC1pbnRlZ3Jh\
dGlvbgogICAgZnJlZTogVHJ1ZQogICAgbWV0YWRhdGE6IHt9CiAgICBwYXJhbWV0ZXJzOgogICAg\
ICAtIG5hbWU6IGluY2x1ZGVfZ29ncwogICAgICAgIHRpdGxlOiBEZXBsb3kgR29ncz8KICAgICAg\
ICB0eXBlOiBib29sZWFuCiAgICAgICAgcmVxdWlyZWQ6IFRydWUKICAgICAgICBkZWZhdWx0OiBG\
YWxzZQogICAgICAgIGRpc3BsYXlfZ3JvdXA6IEdvZ3MgQ29uZmlndXJhdGlvbgogICAgICAtIG5h\
bWU6IGdvZ3Nfdm9sdW1lX3JlcXVlc3QKICAgICAgICB0aXRsZTogRGF0YSBQZXJzaXN0ZW50IFZv\
bHVtZSBTaXplIFJlcXVlc3RlZAogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIHJlcXVpcmVk\
OiBUcnVlCiAgICAgICAgZGVmYXVsdDogNEdpCiAgICAgICAgZGlzcGxheV9ncm91cDogR29ncyBD\
b25maWd1cmF0aW9uCg=="

COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
